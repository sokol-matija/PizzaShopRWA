@page
@model PizzaShopWebApp.Pages.Dashboard.MenuModel
@{
    ViewData["Title"] = "Products Management";
    Layout = "_DashboardLayout";
}

<div class="products-management">
    <div class="header-section">
        <h1>Products Management</h1>
        <button class="btn-manage-categories" id="manageCategories">
            <i class='bx bx-grid-alt'></i>
            Manage Categories
        </button>
    </div>
    
    <div class="category-tabs">
        <button class="tab-item @(string.IsNullOrEmpty(Model.SelectedCategorySlug) ? "active" : "")" 
                onclick="window.location.href='?'">Hot Dishes</button>
        
        @foreach (var category in Model.Categories.Where(c => c.Name != "Hot Dishes"))
        {
            <button class="tab-item @(Model.SelectedCategorySlug == category.Name.ToLower().Replace(" ", "-") ? "active" : "")" 
                    onclick="window.location.href='?category=@category.Name.ToLower().Replace(" ", "-")'">
                @category.Name
            </button>
        }
    </div>
    
    <div class="products-container">
        <!-- Add New Dish Card -->
        <div class="add-dish-card" onclick="window.location.href='/Dashboard/Menu/EditItem'">
            <div class="add-icon">
                <i class='bx bx-plus'></i>
            </div>
            <p>Add new dish</p>
        </div>
        
        @foreach (var item in Model.MenuItems)
        {
            <div class="dish-card">
                <img src="@(string.IsNullOrEmpty(item.ImageUrl) ? "/Images/basic_food_image.png" : item.ImageUrl)" 
                     alt="@item.Name" class="dish-image">
                
                <div class="dish-details">
                    <h3 class="dish-name">@item.Name</h3>
                    <p class="dish-price-bowls">$ @item.Price.ToString("0.00") â€¢ @item.OrderCount Bowls</p>
                </div>
                
                <a href="/Dashboard/Menu/EditItem/@item.Id" class="edit-dish-btn">
                    <i class='bx bx-edit-alt'></i>
                    Edit dish
                </a>
            </div>
        }
    </div>
    
    <div class="action-buttons">
        <button class="btn-discard">Discard Changes</button>
        <button class="btn-save">Save Changes</button>
    </div>
</div>

<style>
    .products-management {
        padding: 24px;
        font-family: 'Poppins', sans-serif;
    }
    
    .header-section {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 24px;
    }
    
    .header-section h1 {
        font-size: 28px;
        font-weight: 600;
        color: var(--text-color, #fff);
        margin: 0;
    }
    
    .btn-manage-categories {
        display: flex;
        align-items: center;
        gap: 8px;
        background-color: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: #fff;
        font-size: 14px;
        padding: 12px 24px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .btn-manage-categories:hover {
        background-color: rgba(255, 255, 255, 0.12);
    }
    
    .category-tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 24px;
        overflow-x: auto;
        padding-bottom: 8px;
    }
    
    .tab-item {
        background: none;
        border: none;
        color: var(--text-muted, #ABBBC2);
        font-size: 14px;
        padding: 7px 12px;
        border-radius: 8px;
        cursor: pointer;
        white-space: nowrap;
        transition: all 0.3s ease;
    }
    
    .tab-item.active {
        background-color: var(--accent-color, #EA7C69);
        color: #fff;
        box-shadow: 0 8px 24px rgba(234, 124, 105, 0.3);
    }
    
    .products-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(192px, 1fr));
        gap: 28px;
        margin-bottom: 24px;
    }
    
    .add-dish-card {
        background-color: rgba(255, 255, 255, 0.08);
        border: 1px dashed rgba(255, 255, 255, 0.4);
        border-radius: 16px;
        height: 260px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .add-dish-card:hover {
        background-color: rgba(255, 255, 255, 0.12);
    }
    
    .add-icon {
        width: 60px;
        height: 60px;
        background-color: rgba(255, 255, 255, 0.08);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 12px;
    }
    
    .add-icon i {
        font-size: 24px;
        color: var(--accent-color, #EA7C69);
    }
    
    .add-dish-card p {
        color: var(--accent-color, #EA7C69);
        font-size: 14px;
        margin: 0;
    }
    
    .dish-card {
        background-color: var(--secondary-bg-color, #1F1D2B);
        border-radius: 16px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        transition: all 0.3s ease;
    }
    
    .dish-image {
        width: 132px;
        height: 132px;
        object-fit: cover;
        border-radius: 50%;
        margin-bottom: 12px;
    }
    
    .dish-details {
        margin-bottom: 16px;
    }
    
    .dish-name {
        font-size: 14px;
        font-weight: 500;
        margin: 0 0 8px 0;
        color: var(--text-color, #fff);
    }
    
    .dish-price-bowls {
        font-size: 14px;
        color: var(--text-muted, #ABBBC2);
        margin: 0;
    }
    
    .edit-dish-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        background-color: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: #fff;
        font-size: 14px;
        padding: 8px 16px;
        border-radius: 8px;
        cursor: pointer;
        width: 100%;
        justify-content: center;
        transition: all 0.3s ease;
    }
    
    .edit-dish-btn:hover {
        background-color: rgba(255, 255, 255, 0.12);
    }
    
    .action-buttons {
        display: flex;
        justify-content: flex-end;
        gap: 12px;
    }
    
    .btn-discard, .btn-save {
        padding: 14px 24px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .btn-discard {
        background-color: transparent;
        border: 1px solid var(--accent-color, #EA7C69);
        color: var(--accent-color, #EA7C69);
    }
    
    .btn-discard:hover {
        background-color: rgba(234, 124, 105, 0.1);
    }
    
    .btn-save {
        background-color: var(--accent-color, #EA7C69);
        border: none;
        color: #fff;
    }
    
    .btn-save:hover {
        background-color: #d66c5a;
    }
    
    /* Responsive styles are applied inline for compatibility */
</style>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listener for the Manage Categories button
            const manageCategoriesBtn = document.getElementById('manageCategories');
            if (manageCategoriesBtn) {
                manageCategoriesBtn.addEventListener('click', function() {
                    window.location.href = '/Dashboard/Menu/Categories';
                });
            }
            
            // Add event listeners for action buttons
            const discardBtn = document.querySelector('.btn-discard');
            if (discardBtn) {
                discardBtn.addEventListener('click', function() {
                    if (confirm('Are you sure you want to discard all changes?')) {
                        window.location.reload();
                    }
                });
            }
            
            const saveBtn = document.querySelector('.btn-save');
            if (saveBtn) {
                saveBtn.addEventListener('click', function() {
                    alert('Changes saved successfully!');
                });
            }
        });
    </script>
} 